<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Professional closet estimator for Desire Cabinets LLC">
    <meta name="theme-color" content="#B8860B">
    <title>DesireCabinets - Closet Estimator</title>
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="images/logo.jpg">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- jsPDF for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="app-header">
        <div class="header-content">
            <div class="logo-container">
                <img src="images/logo.jpg" alt="Desire Cabinets LLC" id="logo-img">
            </div>
            <div class="header-actions">
                <button class="btn btn-secondary" onclick="app.reset()">
                    <span>â†»</span> New Quote
                </button>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Room Tabs -->
        <div class="room-tabs-container">
            <div class="room-tabs" id="roomTabs">
                <!-- Generated by JS -->
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 30px;">
            <!-- Main Content -->
            <div>
                <!-- Client Information -->
                <div class="card">
                    <div class="card-header">
                        <h2>Client Information</h2>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="clientName">Client Name *</label>
                            <input type="text" id="clientName" placeholder="Enter client name" onchange="app.updateClient('name', this.value)">
                        </div>
                        <div class="form-group">
                            <label for="clientPhone">Phone</label>
                            <input type="tel" id="clientPhone" placeholder="(555) 123-4567" onchange="app.updateClient('phone', this.value)">
                        </div>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="clientAddress">Project Address</label>
                            <input type="text" id="clientAddress" placeholder="Enter project address" onchange="app.updateClient('address', this.value)">
                        </div>
                        <div class="form-group">
                            <label for="clientEmail">Email</label>
                            <input type="email" id="clientEmail" placeholder="client@email.com" onchange="app.updateClient('email', this.value)">
                        </div>
                    </div>
                </div>

                <!-- Closet Specifications -->
                <div class="card">
                    <div class="card-header">
                        <h2>Closet Specifications</h2>
                    </div>
                    <div class="form-group">
                        <label for="roomName">Room/Location Name (optional)</label>
                        <input type="text" id="roomName" placeholder="e.g., Master Bedroom, Guest Room" onchange="app.updateCloset('roomName', this.value)">
                    </div>
                    <div class="form-group">
                        <label>Closet Type</label>
                        <div class="selection-grid" id="closetTypeSelector">
                            <!-- Generated by JS -->
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="linearFeet">Total Linear Feet *</label>
                        <input type="number" id="linearFeet" min="0" step="0.5" value="0" placeholder="Enter linear feet" onchange="app.updateCloset('linearFeet', parseFloat(this.value))">
                    </div>
                    <div class="form-group">
                        <label>Depth *</label>
                        <div class="depth-selector" id="depthSelector">
                            <!-- Generated by JS -->
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="height">Height (inches)</label>
                        <input type="number" id="height" value="96" onchange="app.updateCloset('height', parseFloat(this.value))">
                    </div>
                </div>

                <!-- Material & Hardware -->
                <div class="card">
                    <div class="card-header">
                        <h2>Material & Hardware</h2>
                    </div>
                    <div class="form-group">
                        <label>Material Finish</label>
                        <div class="selection-grid" id="materialSelector">
                            <!-- Generated by JS -->
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Hardware Finish</label>
                        <div class="selection-grid" id="hardwareSelector">
                            <!-- Generated by JS -->
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Mounting Type</label>
                        <div class="selection-grid" id="mountingSelector">
                            <!-- Generated by JS -->
                        </div>
                    </div>
                </div>

                <!-- Add-ons -->
                <div class="card">
                    <div class="card-header">
                        <h2>Add-ons & Upgrades</h2>
                    </div>
                    <div class="addon-list" id="addonList">
                        <!-- Generated by JS -->
                    </div>
                </div>

                <!-- Notes -->
                <div class="card">
                    <div class="card-header">
                        <h2>Project Notes</h2>
                    </div>
                    <div class="form-group">
                        <label for="projectNotes">Additional Notes or Special Requirements</label>
                        <textarea id="projectNotes" placeholder="Enter any special notes, measurements, or requirements..." onchange="app.updateNotes(this.value)"></textarea>
                    </div>
                </div>
            </div>

            <!-- Summary Sidebar -->
            <div>
                <div class="summary-card">
                    <h2>Quote Summary</h2>
                    
                    <div class="quote-info">
                        <div class="quote-info-item">
                            <span class="quote-info-label">Quote #</span>
                            <span class="quote-info-value" id="quoteNumber">----</span>
                        </div>
                        <div class="quote-info-item">
                            <span class="quote-info-label">Date</span>
                            <span class="quote-info-value" id="quoteDate">----</span>
                        </div>
                        <div class="quote-info-item">
                            <span class="quote-info-label">Rooms</span>
                            <span class="quote-info-value" id="roomCount">1 Room</span>
                        </div>
                    </div>
                    
                    <div class="summary-line">
                        <span class="summary-label">Base System</span>
                        <span class="summary-value" id="summaryBase">$0.00</span>
                    </div>

                    <div class="summary-line" id="materialUpchargeLine" style="display: none;">
                        <span class="summary-label">Material Upcharge</span>
                        <span class="summary-value" id="summaryMaterial">$0.00</span>
                    </div>

                    <div class="summary-line" id="addonsLine" style="display: none;">
                        <span class="summary-label">Add-ons</span>
                        <span class="summary-value" id="summaryAddons">$0.00</span>
                    </div>

                    <!-- Room Breakdown -->
                    <div id="roomBreakdown" style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.2);">
                        <div style="font-size: 12px; font-weight: 600; margin-bottom: 10px; color: rgba(255,255,255,0.8);">BREAKDOWN BY ROOM</div>
                        <div id="roomBreakdownList">
                            <!-- Generated by JS -->
                        </div>
                    </div>

                    <!-- Tax & Discount -->
                    <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.2);">
                        <div class="form-group" style="margin-bottom: 15px;">
                            <label style="color: rgba(255,255,255,0.8); font-size: 13px; margin-bottom: 5px;">Tax Rate (%)</label>
                            <input type="number" id="taxRate" min="0" max="100" step="0.1" value="0" placeholder="e.g., 7.5" 
                                   style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white;"
                                   onchange="app.updateTax(parseFloat(this.value) || 0)">
                        </div>
                        <div class="form-group">
                            <label style="color: rgba(255,255,255,0.8); font-size: 13px; margin-bottom: 5px;">Discount</label>
                            <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 8px;">
                                <select id="discountType" 
                                        style="padding: 8px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white;"
                                        onchange="app.updateDiscountType(this.value)">
                                    <option value="percent">%</option>
                                    <option value="dollar">$</option>
                                </select>
                                <input type="number" id="discountValue" min="0" step="0.01" value="0" placeholder="0" 
                                       style="padding: 8px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white;"
                                       onchange="app.updateDiscountValue(parseFloat(this.value) || 0)">
                            </div>
                        </div>
                    </div>

                    <div class="summary-line">
                        <span class="summary-label">TOTAL ESTIMATE</span>
                        <span class="summary-value" id="summaryTotal">$0.00</span>
                    </div>

                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="app.generatePDF()">
                            <span>ðŸ“„</span> Generate Quote
                        </button>
                        <button class="btn btn-secondary" onclick="app.generateAlternatePDF()" id="altQuoteBtn" style="display: none;">
                            <span>ðŸ“„</span> Quote without LEDs
                        </button>
                        <button class="btn btn-secondary" onclick="app.save()">
                            <span>ðŸ’¾</span> Save
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/calculator.js"></script>
    <script src="js/report.js"></script>
    <script src="js/app.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
                .then(reg => console.log('Service Worker registered'))
                .catch(err => console.log('Service Worker registration failed'));
        }
    </script>
</body>
</html>
